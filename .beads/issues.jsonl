{"id":"higher-peak-0m1","title":"Implement sg evaluate command (UserPromptSubmit)","description":"Why: Infer phase from user message, cache to state.json. Done when: Reads transcript + new user message, calls superego LLM, writes phase to .superego/state.json. Called by UserPromptSubmit hook.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:44.738794+01:00","updated_at":"2025-12-11T18:08:44.738794+01:00","dependencies":[{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:27.482082+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-1sa","type":"blocks","created_at":"2025-12-11T18:09:32.613686+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-465","type":"blocks","created_at":"2025-12-11T18:09:37.759647+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-uws","type":"blocks","created_at":"2025-12-11T18:09:42.89031+01:00","created_by":"drazen"}]}
{"id":"higher-peak-1sa","title":"Implement Claude CLI invocation from Rust","description":"Why: Core evaluation engine - call claude --print with context. Done when: Can invoke claude CLI, pass system prompt + user message, parse JSON response, handle errors/timeouts.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:34.307856+01:00","updated_at":"2025-12-11T17:56:34.307856+01:00","dependencies":[{"issue_id":"higher-peak-1sa","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:20.712011+01:00","created_by":"drazen"}]}
{"id":"higher-peak-33t","title":"Implement state evaluation heuristics","description":"Why: Optional fast-path before LLM call. Done when: Quick checks (action count, explicit 'wait' phrases) can skip LLM call when clearly fine. OPTIONAL - LLM handles this if not implemented.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-11T17:47:25.787841+01:00","updated_at":"2025-12-11T17:58:51.755062+01:00","dependencies":[{"issue_id":"higher-peak-33t","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:23.309776+01:00","created_by":"drazen"}]}
{"id":"higher-peak-419","title":"Implement sg override command","description":"Why: Claude calls this after user approves override. Done when: Writes override_granted decision with reason, allows blocked action to proceed.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:54.160258+01:00","updated_at":"2025-12-11T17:46:54.160258+01:00","dependencies":[{"issue_id":"higher-peak-419","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:56.740762+01:00","created_by":"drazen"}]}
{"id":"higher-peak-465","title":"Implement superego session management","description":"Why: Persist superego's own context across checks. Done when: Session stored in .superego/session/, --continue flag used to maintain context, session survives across main Claude sessions.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:47.313652+01:00","updated_at":"2025-12-11T17:56:47.313652+01:00","dependencies":[{"issue_id":"higher-peak-465","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:25.852403+01:00","created_by":"drazen"}]}
{"id":"higher-peak-4ik","title":"Implement sg history command","description":"Why: Context recovery - Claude can query past decisions. Done when: Reads .superego/decisions/*, returns chronological list with optional limit.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:02.982551+01:00","updated_at":"2025-12-11T17:47:02.982551+01:00","dependencies":[{"issue_id":"higher-peak-4ik","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:51:01.868753+01:00","created_by":"drazen"}]}
{"id":"higher-peak-7sh","title":"Create UserPromptSubmit hook","description":"Why: Trigger phase evaluation on every user message. Done when: Hook calls sg evaluate with transcript path, runs before Claude responds.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:56.264172+01:00","updated_at":"2025-12-11T18:08:56.264172+01:00","dependencies":[{"issue_id":"higher-peak-7sh","depends_on_id":"higher-peak-0m1","type":"blocks","created_at":"2025-12-11T18:09:48.02664+01:00","created_by":"drazen"}]}
{"id":"higher-peak-88l","title":"Implement sg acknowledge command","description":"Why: Claude calls this to accept feedback and clear the queue. Done when: Writes feedback_accepted decision, clears pending state.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:45.676276+01:00","updated_at":"2025-12-11T17:46:45.676276+01:00","dependencies":[{"issue_id":"higher-peak-88l","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:51.593484+01:00","created_by":"drazen"}]}
{"id":"higher-peak-9eo","title":"Implement decision journal (read/write YAML)","description":"Why: Persist decisions for context recovery and audit trail. Done when: Can write decision records to .superego/decisions/, read them back, session_id in records not paths.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:18.514268+01:00","updated_at":"2025-12-11T17:46:18.514268+01:00","dependencies":[{"issue_id":"higher-peak-9eo","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:18.161186+01:00","created_by":"drazen"}]}
{"id":"higher-peak-9ty","title":"Scaffold Rust CLI project with clap","description":"Why: Foundation for all sg commands. Done when: cargo new + clap dependency + basic sg --help works.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-11T17:46:00.664042+01:00","updated_at":"2025-12-11T17:46:00.664042+01:00"}
{"id":"higher-peak-anu","title":"Implement tool classification (read vs write)","description":"Why: Only gate write tools, skip reads for speed. Done when: Classifies tools as read (Glob,Grep,Read,LS,WebFetch,WebSearch) or write (Edit,Write,Bash,Task,NotebookEdit). PreToolUse hook uses this to skip checks on reads.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T18:09:04.632425+01:00","updated_at":"2025-12-11T18:09:04.632425+01:00","dependencies":[{"issue_id":"higher-peak-anu","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:53.148892+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ggj","title":"Design superego system prompt","description":"Why: Defines superego's personality and evaluation criteria. Done when: prompt.md template exists, covers: phase detection, unknown tracking, brownian motion, structured JSON output format.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:15.728032+01:00","updated_at":"2025-12-11T17:56:15.728032+01:00","dependencies":[{"issue_id":"higher-peak-ggj","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:15.575755+01:00","created_by":"drazen"}]}
{"id":"higher-peak-gmx","title":"Create SessionStart hook for context injection","description":"Why: Inject superego behavioral contract into Claude's context. Done when: Hook returns additionalContext with obligations, resumed session shows decision summary.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:44.975752+01:00","updated_at":"2025-12-11T17:47:44.975752+01:00","dependencies":[{"issue_id":"higher-peak-gmx","depends_on_id":"higher-peak-4ik","type":"blocks","created_at":"2025-12-11T17:51:15.43955+01:00","created_by":"drazen"}]}
{"id":"higher-peak-lsm","title":"Document Claude behavioral contract","description":"Why: Claude needs clear instructions on how to behave when blocked. Done when: Markdown doc specifies: surface conflicts to user, present options, call acknowledge/override appropriately.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:57.248247+01:00","updated_at":"2025-12-11T17:47:57.248247+01:00"}
{"id":"higher-peak-ov5","title":"End-to-end integration test","description":"Why: Verify full flow works. Done when: Test covers: hook blocks action → Claude surfaces conflict → user overrides → hook allows retry.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-11T17:48:10.741668+01:00","updated_at":"2025-12-11T17:48:10.741668+01:00","dependencies":[{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-yr1","type":"blocks","created_at":"2025-12-11T17:51:20.617469+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-gmx","type":"blocks","created_at":"2025-12-11T17:51:25.719328+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-7sh","type":"blocks","created_at":"2025-12-11T18:11:00.629461+01:00","created_by":"drazen"}]}
{"id":"higher-peak-uws","title":"Implement transcript JSONL reader","description":"Why: Superego needs to read Claude Code conversation history. Done when: Can parse transcript_path JSONL, extract messages with roles/content.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:10.227196+01:00","updated_at":"2025-12-11T17:46:10.227196+01:00","dependencies":[{"issue_id":"higher-peak-uws","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:13.003014+01:00","created_by":"drazen"}]}
{"id":"higher-peak-v2i","title":"Implement sg check command","description":"Why: Fast gate for write tools. Done when: Reads .superego/state.json (cached phase), returns allow/block based on phase vs tool type. NO LLM call - just reads cached state from evaluate.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:26.701874+01:00","updated_at":"2025-12-11T18:10:14.517527+01:00","dependencies":[{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:36.82027+01:00","created_by":"drazen"},{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:10:41.366504+01:00","created_by":"drazen"}]}
{"id":"higher-peak-yr1","title":"Create PreToolUse hook script","description":"Why: Gate Claude actions via hook. Done when: Hook reads stdin JSON, calls sg check, returns permissionDecision deny/allow with reason.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T17:47:34.398443+01:00","updated_at":"2025-12-11T17:47:34.398443+01:00","dependencies":[{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-v2i","type":"blocks","created_at":"2025-12-11T17:51:10.287715+01:00","created_by":"drazen"},{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:09:58.318623+01:00","created_by":"drazen"}]}
