{"id":"higher-peak-00p","title":"Implement sg disable/enable escape hatch","description":"Why: User needs to bypass superego if it malfunctions. Done when: sg disable sets flag, hooks check flag and skip, SUPEREGO_DISABLED env var also works.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:15:31.442812+01:00","updated_at":"2025-12-12T21:44:45.120325+01:00","closed_at":"2025-12-12T21:44:45.120325+01:00","dependencies":[{"issue_id":"higher-peak-00p","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:17:21.244976+01:00","created_by":"drazen"}]}
{"id":"higher-peak-0fe","title":"Implement daemon mode for async evaluation","description":"Why: Stop hook blocking latency (10-30s) hurts UX. Done when: sg daemon runs in background, evaluates proactively, hooks consume pre-computed feedback instantly.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T13:56:52.923047+01:00","updated_at":"2025-12-22T14:01:09.645969+01:00","closed_at":"2025-12-22T14:01:09.645969+01:00","close_reason":"Parked: root cause is transcript lag, not evaluation latency","dependencies":[{"issue_id":"higher-peak-0fe","depends_on_id":"higher-peak-5ia","type":"blocks","created_at":"2025-12-22T13:57:45.428729+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0fe","depends_on_id":"higher-peak-17t","type":"blocks","created_at":"2025-12-22T13:57:50.647715+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0fe","depends_on_id":"higher-peak-1k7","type":"blocks","created_at":"2025-12-22T13:57:55.86519+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0fe","depends_on_id":"higher-peak-ly6","type":"blocks","created_at":"2025-12-22T13:58:01.065485+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0fe","depends_on_id":"higher-peak-j6z","type":"blocks","created_at":"2025-12-22T13:58:06.298966+01:00","created_by":"drazen"}]}
{"id":"higher-peak-0m1","title":"Implement sg evaluate command (UserPromptSubmit)","description":"Why: Infer phase from user message, cache to state.json. Done when: Reads transcript + new user message, calls superego LLM, writes phase to .superego/state.json. Called by UserPromptSubmit hook.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:44.738794+01:00","updated_at":"2025-12-11T19:35:41.396155+01:00","closed_at":"2025-12-11T19:35:41.396155+01:00","dependencies":[{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:27.482082+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-1sa","type":"blocks","created_at":"2025-12-11T18:09:32.613686+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-465","type":"blocks","created_at":"2025-12-11T18:09:37.759647+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-uws","type":"blocks","created_at":"2025-12-11T18:09:42.89031+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-oin","type":"blocks","created_at":"2025-12-11T18:17:11.810764+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-ya8","type":"blocks","created_at":"2025-12-11T18:17:36.708414+01:00","created_by":"drazen"}]}
{"id":"higher-peak-0wk","title":"YAML migration script needs safety improvements","description":"PR feedback: Script in CLAUDE.md has issues: (1) unquoted variables in JSON output, (2) no error handling, (3) no validation of generated JSON, (4) destructive without backups. Add: backup warning, set -e, JSON validation before writing.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T23:34:19.5304+01:00","updated_at":"2025-12-17T23:38:36.60224+01:00","closed_at":"2025-12-17T23:38:36.60224+01:00","close_reason":"Improved script with set -e, IFS read, env vars for safe JSON encoding, validation"}
{"id":"higher-peak-0zg","title":"Fix sg history to show all decisions","description":"Why: history command only reads empty base dir, misses all session decisions. Done when: sg history uses read_all_sessions().","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T15:00:37.098632+01:00","updated_at":"2025-12-18T15:02:24.240179+01:00","closed_at":"2025-12-18T15:02:24.240179+01:00","close_reason":"Fixed: sg history now uses read_all_sessions() to read from all session directories"}
{"id":"higher-peak-17t","title":"Daemon: poll loop with transcript watching","description":"Why: Core daemon behavior. Done when: Daemon runs in background, detects transcript changes, triggers evaluation before Stop hook fires.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T13:57:17.155286+01:00","updated_at":"2025-12-22T14:01:00.02223+01:00","closed_at":"2025-12-22T14:01:00.02223+01:00","close_reason":"Parked: investigating transcript lag first","dependencies":[{"issue_id":"higher-peak-17t","depends_on_id":"higher-peak-5ia","type":"blocks","created_at":"2025-12-22T13:58:11.60132+01:00","created_by":"drazen"}]}
{"id":"higher-peak-1be","title":"Add timeout to get_contexts()","description":"Why: Can hang indefinitely if OH server unresponsive. Done when: 5s timeout added.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T13:03:55.618924+01:00","updated_at":"2025-12-21T13:05:28.081962+01:00","closed_at":"2025-12-21T13:05:28.081962+01:00","close_reason":"All OH HTTP methods now have 5s timeout"}
{"id":"higher-peak-1k7","title":"Daemon: feedback cache layer","description":"Why: Store pre-computed feedback. Done when: Evaluated feedback is cached per-session, hooks can read instantly without re-evaluating.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T13:57:22.407981+01:00","updated_at":"2025-12-22T14:01:00.022642+01:00","closed_at":"2025-12-22T14:01:00.022642+01:00","close_reason":"Parked: investigating transcript lag first"}
{"id":"higher-peak-1sa","title":"Implement Claude CLI invocation from Rust","description":"Why: Core evaluation engine - call claude CLI with context. Done when: Can invoke claude CLI, pass system prompt + user message, parse JSON response (handle prose around JSON robustly), handle errors/timeouts. NOTE: Verify correct CLI flags, may need adaptation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:34.307856+01:00","updated_at":"2025-12-11T19:30:06.806934+01:00","closed_at":"2025-12-11T19:30:06.806934+01:00","dependencies":[{"issue_id":"higher-peak-1sa","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:20.712011+01:00","created_by":"drazen"}]}
{"id":"higher-peak-1v1","title":"Add periodic time-based eval to PreToolUse","description":"Why: Death by a thousand cuts - many small changes drift undetected. Done when: sg should-eval command exists, pre-tool-use.sh triggers eval if \u003eN minutes since last eval.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T00:31:57.070228+01:00","updated_at":"2025-12-17T00:34:47.564059+01:00","closed_at":"2025-12-17T00:34:47.564059+01:00"}
{"id":"higher-peak-1ws","title":"Simplify Feedback module - remove Severity","description":"Why: Severity enum has unused Block/Info variants, only Warning used. No blocking anymore. Done when: Severity removed, Feedback is just message+context, tests updated.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:05:49.595552+01:00","updated_at":"2025-12-11T22:28:24.14644+01:00","closed_at":"2025-12-11T22:28:24.14644+01:00"}
{"id":"higher-peak-23l","title":"Add timeout to get_endeavors()","description":"Why: Can hang indefinitely if OH server unresponsive. Done when: 5s timeout added.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T13:04:00.917851+01:00","updated_at":"2025-12-21T13:05:28.084701+01:00","closed_at":"2025-12-21T13:05:28.084701+01:00","close_reason":"All OH HTTP methods now have 5s timeout"}
{"id":"higher-peak-24g","title":"Implement model selection config","description":"Why: Users may want faster/cheaper model for superego. Done when: .superego/config.yaml supports model setting, defaults to Claude Code default, sg evaluate uses configured model.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:35:12.742893+01:00","updated_at":"2025-12-12T21:44:24.180678+01:00","closed_at":"2025-12-12T21:44:24.180678+01:00","dependencies":[{"issue_id":"higher-peak-24g","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:30.678605+01:00","created_by":"drazen"}]}
{"id":"higher-peak-26j","title":"Document is_available() in oh.rs","description":"Why: Method exists but is never called (dead code). Done when: AIDEV-NOTE explains it's for future use/debugging, or method is removed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T12:33:44.104641+01:00","updated_at":"2025-12-21T13:29:51.124925+01:00","closed_at":"2025-12-21T13:29:51.124925+01:00","close_reason":"Removed unused code instead of documenting"}
{"id":"higher-peak-2o0","title":"Add sg retro CLI subcommand","description":"Why: Need retro visualization command. Done when: Retro subcommand added to main.rs with session, curated, output, open args.","status":"closed","priority":1,"issue_type":"feature","assignee":"claude","created_at":"2025-12-24T01:01:46.825584+01:00","updated_at":"2025-12-24T01:13:10.344381+01:00","closed_at":"2025-12-24T01:13:10.344381+01:00","close_reason":"CLI subcommand added"}
{"id":"higher-peak-2st","title":"Remove dead println in should-eval command","description":"Why: println yes/no is now dead code since shell uses exit codes only. Done when: Either removed or documented as kept for manual debugging.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T14:46:06.453394+01:00","updated_at":"2025-12-22T15:20:22.76405+01:00","closed_at":"2025-12-22T15:20:22.76405+01:00","close_reason":"Keeping println for manual debugging/CLI usability"}
{"id":"higher-peak-2ub","title":"Ensure rich superego feedback reaches Claude","description":"Why: Superego is a metacognitive advisor - feedback must actually steer Claude's behavior. Done when: Feedback is injected as context Claude sees, Claude acknowledges/incorporates feedback in its responses, feedback covers approach/alignment not just write gating.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-11T21:41:49.373698+01:00","updated_at":"2025-12-12T21:44:13.721651+01:00","closed_at":"2025-12-12T21:44:13.721651+01:00"}
{"id":"higher-peak-33t","title":"Implement state evaluation heuristics","description":"Why: Optional fast-path before LLM call. Done when: Quick checks (action count, explicit 'wait' phrases) can skip LLM call when clearly fine. OPTIONAL - LLM handles this if not implemented.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T17:47:25.787841+01:00","updated_at":"2025-12-12T21:45:37.88682+01:00","closed_at":"2025-12-12T21:45:37.88682+01:00","dependencies":[{"issue_id":"higher-peak-33t","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:23.309776+01:00","created_by":"drazen"}]}
{"id":"higher-peak-3j3","title":"Remove tool result truncation","description":"Why: User requested full tool results. Done when: truncation removed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T01:26:26.027765+01:00","updated_at":"2025-12-17T01:26:42.923975+01:00","closed_at":"2025-12-17T01:26:42.923975+01:00"}
{"id":"higher-peak-3nn","title":"Finalize packaging after GitHub repo creation","description":"Why: Packaging has placeholder URLs. Done when: (1) Update Cargo.toml repository URL, (2) Update Formula/sg.rb homepage/url/sha256, (3) Create homebrew-higher-peak tap repo, (4) Publish to crates.io if desired.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T15:58:47.707414+01:00","updated_at":"2025-12-12T21:44:18.951214+01:00","closed_at":"2025-12-12T21:44:18.951214+01:00"}
{"id":"higher-peak-419","title":"Implement sg override command","description":"Why: Claude calls this after user approves override. Done when: Writes override_granted decision with reason, allows blocked action to proceed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:54.160258+01:00","updated_at":"2025-12-12T21:45:16.960087+01:00","closed_at":"2025-12-12T21:45:16.960087+01:00","dependencies":[{"issue_id":"higher-peak-419","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:56.740762+01:00","created_by":"drazen"},{"issue_id":"higher-peak-419","depends_on_id":"higher-peak-cdz","type":"blocks","created_at":"2025-12-11T18:17:41.859111+01:00","created_by":"drazen"}]}
{"id":"higher-peak-465","title":"Implement superego session management","description":"Why: Persist superego's own context across checks. Done when: Session stored in .superego/session/, --continue flag used to maintain context, session survives across main Claude sessions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:47.313652+01:00","updated_at":"2025-12-11T19:35:56.839493+01:00","closed_at":"2025-12-11T19:35:56.839493+01:00","dependencies":[{"issue_id":"higher-peak-465","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:25.852403+01:00","created_by":"drazen"}]}
{"id":"higher-peak-46t","title":"Consider atomic state file writes","description":"Why: If process crashes mid-write, state.json could be corrupted. Done when: Uses write-to-temp-then-rename pattern, or documented as acceptable risk.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T14:45:52.642845+01:00","updated_at":"2025-12-22T15:31:45.822764+01:00","closed_at":"2025-12-22T15:31:45.822764+01:00","close_reason":"Acceptable risk: corrupted state just triggers re-eval (safe fallback)"}
{"id":"higher-peak-4fk","title":"Document should-eval exit code contract","description":"Why: Shell script relies on exit 0=yes, 1=no but this is only implicit in code. Done when: CLI help text or CLAUDE.md documents the contract.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T14:45:41.973705+01:00","updated_at":"2025-12-22T15:22:32.242794+01:00","closed_at":"2025-12-22T15:22:32.242794+01:00","close_reason":"Documented in source code and CLAUDE.md"}
{"id":"higher-peak-4ik","title":"Implement sg history command","description":"Why: Context recovery - Claude can query past decisions. Done when: Reads .superego/decisions/*, returns chronological list with optional limit.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:02.982551+01:00","updated_at":"2025-12-12T21:45:11.732064+01:00","closed_at":"2025-12-12T21:45:11.732064+01:00","dependencies":[{"issue_id":"higher-peak-4ik","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:51:01.868753+01:00","created_by":"drazen"}]}
{"id":"higher-peak-4kz","title":"General dead code cleanup","description":"Why: Various unused fields/functions across modules (see cargo build warnings). Done when: All unused warnings resolved or explicitly allowed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T22:06:05.073719+01:00","updated_at":"2025-12-11T22:35:21.694449+01:00","closed_at":"2025-12-11T22:35:21.694449+01:00"}
{"id":"higher-peak-4mi","title":"Support nested .superego/ discovery (future)","description":"Why: User might have project/.superego/ and project/subdir/.superego/. Future: Implement discovery logic like beads does - walk up to find nearest .superego/.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-11T18:36:00.391634+01:00","updated_at":"2025-12-12T21:45:43.110645+01:00","closed_at":"2025-12-12T21:45:43.110645+01:00"}
{"id":"higher-peak-4qv","title":"Use full model identifier in audit.rs","description":"PR feedback: Line 111 uses bare 'haiku' string which is incorrect. Should use 'claude-haiku-4-5-20251001' or at minimum 'claude-haiku-4-5' for proper model identification.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T23:34:24.830998+01:00","updated_at":"2025-12-17T23:35:34.954496+01:00","closed_at":"2025-12-17T23:35:34.954496+01:00","close_reason":"Not an issue - user fixed"}
{"id":"higher-peak-4t2","title":"Refactor superego to daemon architecture","description":"Why: Eliminate hook blocking latency. Done when: Daemon polls sessions, evaluates async, hooks consume pre-computed feedback instantly.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T22:18:58.891959+01:00","updated_at":"2025-12-16T23:28:24.086689+01:00","closed_at":"2025-12-16T23:28:24.086689+01:00"}
{"id":"higher-peak-5ia","title":"Daemon: session registry and discovery","description":"Why: Daemon needs to know which sessions to monitor. Done when: Can track active sessions by watching transcript directory or via hook registration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T13:57:11.849744+01:00","updated_at":"2025-12-22T14:01:00.020794+01:00","closed_at":"2025-12-22T14:01:00.020794+01:00","close_reason":"Parked: investigating transcript lag first"}
{"id":"higher-peak-5xr","title":"Remove vestigial SEVERITY/blocking logic from hooks","description":"Why: No more hard gates, just feedback injection. Done when: user-prompt-submit.sh removes SEVERITY checks, always injects feedback as context, no exit 2 blocking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T21:53:50.56049+01:00","updated_at":"2025-12-11T21:58:09.004389+01:00","closed_at":"2025-12-11T21:58:09.004389+01:00"}
{"id":"higher-peak-5y6","title":"Fix superego cross-session context bleed","description":"Why: Superego evaluated based on wrong conversation context (referenced 'centralized config' discussion from different session). Done when: evaluation only considers current session transcript, no cross-session confusion.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T00:40:12.753004+01:00","updated_at":"2025-12-17T00:58:50.466295+01:00","closed_at":"2025-12-17T00:58:50.466295+01:00"}
{"id":"higher-peak-6cy","title":"Add sg audit command","description":"Add audit command that reports summary statistics of superego decisions across all sessions. Includes --json flag for programmatic output.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T22:38:55.657693+01:00","updated_at":"2025-12-17T23:22:12.372678+01:00","closed_at":"2025-12-17T23:22:12.372678+01:00","close_reason":"Implemented audit command and fixed stdout piping bug"}
{"id":"higher-peak-6dy","title":"Update LLM evaluation for natural language feedback","description":"Why: New prompt outputs rich natural language, not JSON. Done when: evaluate command calls LLM, gets natural language response, writes to feedback queue. No JSON parsing, no phase extraction.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T21:53:45.409809+01:00","updated_at":"2025-12-11T21:57:12.594917+01:00","closed_at":"2025-12-11T21:57:12.594917+01:00"}
{"id":"higher-peak-6mx","title":"Remove dead JSON parsing from claude.rs","description":"Why: extract_json, parse_evaluation, SuperegoEvaluation unused since we use natural language feedback. Done when: Dead code removed, module simplified.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:05:54.770587+01:00","updated_at":"2025-12-11T22:29:20.391704+01:00","closed_at":"2025-12-11T22:29:20.391704+01:00"}
{"id":"higher-peak-6n4","title":"Add LLM-based endeavor matching","description":"Why: Generative discovery of which endeavor relates to current work. Done when: given repo context and endeavor list, LLM picks best match or suggests none.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:57:50.17315+01:00","updated_at":"2025-12-21T12:13:17.833449+01:00","closed_at":"2025-12-21T12:13:17.833449+01:00","close_reason":"Replaced with simpler OH_ENDEAVOR_ID config approach per user preference","dependencies":[{"issue_id":"higher-peak-6n4","depends_on_id":"higher-peak-dpb","type":"blocks","created_at":"2025-12-21T11:58:12.264064+01:00","created_by":"drazen"}]}
{"id":"higher-peak-6pg","title":"Verify Claude CLI invocation syntax","description":"Why: Need correct flags for non-interactive Claude calls. Done when: Tested claude --print (or correct flag), documented in ARCHITECTURE.md, handles session continuation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:35:00.923189+01:00","updated_at":"2025-12-11T19:30:11.96026+01:00","closed_at":"2025-12-11T19:30:11.96026+01:00","dependencies":[{"issue_id":"higher-peak-6pg","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:25.541736+01:00","created_by":"drazen"}]}
{"id":"higher-peak-6wt","title":"Implement sg reset command","description":"Why: Recovery from corrupted state. Done when: Clears state.json, optionally clears session/, preserves decisions/ journal.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:23:36.991851+01:00","updated_at":"2025-12-12T21:44:34.650526+01:00","closed_at":"2025-12-12T21:44:34.650526+01:00","dependencies":[{"issue_id":"higher-peak-6wt","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:37.159522+01:00","created_by":"drazen"}]}
{"id":"higher-peak-76w","title":"Optimize double transcript read in evaluate.rs","description":"Transcript is read twice: once for main context, once for carryover. Refactor to read once and reuse.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T12:10:50.966002+01:00","updated_at":"2025-12-23T12:33:21.197972+01:00","closed_at":"2025-12-23T12:33:21.197972+01:00","close_reason":"Refactored to read transcript once and pass to carryover context"}
{"id":"higher-peak-7h3","title":"Add superego self-audit capability","description":"Why: Quis custodiet ipsos custodes - we need confidence that superego's evaluations are sound. Done when: mechanism exists to audit/review superego's own decisions, catch drift in evaluation quality, and flag suspicious patterns in its own behavior.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T00:38:38.892379+01:00","updated_at":"2025-12-17T23:46:03.191262+01:00","closed_at":"2025-12-17T23:46:03.191262+01:00","close_reason":"Closed"}
{"id":"higher-peak-7i0","title":"Move carryover context magic numbers to config","description":"Extract hardcoded values to config.yaml: decision count (2), window minutes (5). Currently in evaluate.rs.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T12:10:24.783946+01:00","updated_at":"2025-12-23T12:21:26.613545+01:00","closed_at":"2025-12-23T12:21:26.613545+01:00","close_reason":"Added config module with carryover_decision_count and carryover_window_minutes"}
{"id":"higher-peak-7sh","title":"Create UserPromptSubmit hook","description":"Why: Trigger phase evaluation on every user message. Done when: Hook calls sg evaluate with transcript path, runs before Claude responds.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:56.264172+01:00","updated_at":"2025-12-11T21:06:53.378963+01:00","closed_at":"2025-12-11T21:06:53.378963+01:00","dependencies":[{"issue_id":"higher-peak-7sh","depends_on_id":"higher-peak-0m1","type":"blocks","created_at":"2025-12-11T18:09:48.02664+01:00","created_by":"drazen"}]}
{"id":"higher-peak-88l","title":"Implement sg acknowledge command","description":"Why: Claude calls this to accept feedback and clear the queue. Done when: Writes feedback_accepted decision, clears pending state.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:45.676276+01:00","updated_at":"2025-12-12T21:45:22.168121+01:00","closed_at":"2025-12-12T21:45:22.168121+01:00","dependencies":[{"issue_id":"higher-peak-88l","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:51.593484+01:00","created_by":"drazen"}]}
{"id":"higher-peak-8dm","title":"Wire up interval-based eval in PreToolUse hook","description":"Why: Catch conversation drift during long sessions without large edits. Done when: PreToolUse checks sg needs-eval after size check, triggers eval if interval passed.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T14:24:03.900727+01:00","updated_at":"2025-12-22T14:34:14.713874+01:00","closed_at":"2025-12-22T14:34:14.713874+01:00","close_reason":"Implemented: PreToolUse now triggers on large Edit/Write OR interval elapsed"}
{"id":"higher-peak-8lw","title":"Implement sg init command","description":"Why: Users need to initialize .superego/ in their project. Done when: Creates .superego/ dir, writes default prompt.md (from embedded default), empty state.json (phase: exploring), decisions/ folder, config.yaml with defaults.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:23:04.477281+01:00","updated_at":"2025-12-11T19:27:50.487336+01:00","closed_at":"2025-12-11T19:27:50.487336+01:00","dependencies":[{"issue_id":"higher-peak-8lw","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:26.886158+01:00","created_by":"drazen"}]}
{"id":"higher-peak-8ov","title":"Remove pre-tool-use hook (hard gating)","description":"Why: Hard gating doesn't align with feedback-first philosophy. Done when: hook, sg check command, and tools.rs removed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T22:26:52.565045+01:00","updated_at":"2025-12-11T22:27:03.337487+01:00","closed_at":"2025-12-11T22:27:03.337487+01:00"}
{"id":"higher-peak-8qj","title":"Phase 5: Migration","description":"Why: Existing users. Done when: sg migrate converts old state to daemon model.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:19:32.006827+01:00","updated_at":"2025-12-17T23:46:03.193954+01:00","closed_at":"2025-12-17T23:46:03.193954+01:00","close_reason":"Closed","dependencies":[{"issue_id":"higher-peak-8qj","depends_on_id":"higher-peak-j7g","type":"blocks","created_at":"2025-12-16T22:20:03.475201+01:00","created_by":"drazen"}]}
{"id":"higher-peak-8zf","title":"Fix clippy warnings (doc comment style)","description":"Why: 4 clippy warnings about empty lines after doc comments. Done when: Module-level /// comments converted to //! inner doc comments in bd.rs, claude.rs, decision.rs, evaluate.rs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T01:33:55.455997+01:00","updated_at":"2025-12-17T01:41:24.651252+01:00","closed_at":"2025-12-17T01:41:24.651252+01:00","close_reason":"Converted module-level /// to //! inner doc comments in 7 files"}
{"id":"higher-peak-90t","title":"Update Stop hook to trigger LLM evaluation","description":"Why: Stop hook only runs evaluate-bd, not evaluate-llm. Rich feedback won't be generated. Done when: Stop hook calls sg evaluate-llm with transcript path (need to get from env or pass through).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T22:05:39.238552+01:00","updated_at":"2025-12-11T22:40:53.358737+01:00","closed_at":"2025-12-11T22:40:53.358737+01:00"}
{"id":"higher-peak-92v","title":"Fix Unicode panic in log truncation","description":"Why: Byte slicing panics on multi-byte UTF-8. Done when: Uses chars().take(200) instead of [..200].","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-21T13:03:50.332037+01:00","updated_at":"2025-12-21T13:04:35.403507+01:00","closed_at":"2025-12-21T13:04:35.403507+01:00","close_reason":"Closed"}
{"id":"higher-peak-9a6","title":"Integrate OH logging into evaluate.rs","description":"Why: Connect the pieces. Done when: after local decision journal write, also logs to OH endeavor if available+matched.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:57:55.368156+01:00","updated_at":"2025-12-21T12:22:36.959166+01:00","closed_at":"2025-12-21T12:22:36.959166+01:00","close_reason":"OH logging integrated into evaluate.rs - logs feedback to configured endeavor when OH_API_KEY + oh_endeavor_id are set","dependencies":[{"issue_id":"higher-peak-9a6","depends_on_id":"higher-peak-v41","type":"blocks","created_at":"2025-12-21T11:58:17.442024+01:00","created_by":"drazen"},{"issue_id":"higher-peak-9a6","depends_on_id":"higher-peak-6n4","type":"blocks","created_at":"2025-12-21T11:58:22.617188+01:00","created_by":"drazen"}]}
{"id":"higher-peak-9eo","title":"Implement decision journal (read/write YAML)","description":"Why: Persist decisions for context recovery and audit trail. Done when: Can write decision records to .superego/decisions/, read them back, session_id in records not paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:18.514268+01:00","updated_at":"2025-12-11T19:22:24.524812+01:00","closed_at":"2025-12-11T19:22:24.524812+01:00","dependencies":[{"issue_id":"higher-peak-9eo","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:18.161186+01:00","created_by":"drazen"}]}
{"id":"higher-peak-9hi","title":"Implement async evaluation via Stop hook","description":"Why: Evaluate while user types, not blocking on submit. Done when: Stop hook triggers sg evaluate in background, has-feedback/get-feedback commands work, UserPromptSubmit checks and surfaces feedback. Architecture: Stop→evaluate(async)→feedback queue→UserPromptSubmit checks→block if feedback.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-11T21:28:32.891626+01:00","updated_at":"2025-12-11T21:38:36.613508+01:00","closed_at":"2025-12-11T21:38:36.613508+01:00"}
{"id":"higher-peak-9ty","title":"Scaffold Rust CLI project with clap","description":"Why: Foundation for all sg commands. Done when: cargo new + clap dependency + basic sg --help works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-11T17:46:00.664042+01:00","updated_at":"2025-12-11T19:10:35.610639+01:00","closed_at":"2025-12-11T19:10:35.610639+01:00"}
{"id":"higher-peak-a6m","title":"Investigate session_id extraction from transcript path","description":"Why: Need to know where session_id comes from for decision records. Done when: Documented how to extract session_id (from filename? hook input?), implemented in CLI.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:34:37.502436+01:00","updated_at":"2025-12-11T22:55:41.928837+01:00","closed_at":"2025-12-11T22:55:41.928837+01:00","dependencies":[{"issue_id":"higher-peak-a6m","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:15.260076+01:00","created_by":"drazen"}]}
{"id":"higher-peak-aew","title":"Hardcoded JSON missing AuditStats fields","description":"PR feedback: main.rs:393-395 hardcoded JSON omits start_date and end_date fields. When AuditResult is serialized these fields are included as null. Either use serde serialization or add missing fields to match struct shape.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T23:34:30.127027+01:00","updated_at":"2025-12-17T23:36:36.456648+01:00","closed_at":"2025-12-17T23:36:36.456648+01:00","close_reason":"Added missing start_date and end_date fields to hardcoded JSON"}
{"id":"higher-peak-afu","title":"Clean up unused transcript functions","description":"Why: get_user_messages, extract_session_id, get_last_user_message etc unused. Done when: Dead functions removed or marked pub(crate) if internal.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T22:05:59.924359+01:00","updated_at":"2025-12-11T22:30:53.741044+01:00","closed_at":"2025-12-11T22:30:53.741044+01:00"}
{"id":"higher-peak-anu","title":"Implement tool classification (read vs write)","description":"Why: Only gate write tools, skip reads for speed. Done when: Classifies tools as read (Glob,Grep,Read,LS,WebFetch,WebSearch) or write (Edit,Write,Bash,Task,NotebookEdit). PreToolUse hook uses this to skip checks on reads.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:09:04.632425+01:00","updated_at":"2025-12-11T19:20:13.441175+01:00","closed_at":"2025-12-11T19:20:13.441175+01:00","dependencies":[{"issue_id":"higher-peak-anu","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:53.148892+01:00","created_by":"drazen"}]}
{"id":"higher-peak-aoj","title":"Migrate from deprecated serde_yaml","description":"Why: serde_yaml is deprecated (shows +deprecated in cargo output). Done when: Either migrated to serde_yml, or evaluated if YAML needed at all (only used for config.yaml and decision journal - could use JSON).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T01:34:19.273317+01:00","updated_at":"2025-12-17T01:45:07.911582+01:00","closed_at":"2025-12-17T01:45:07.911582+01:00","close_reason":"Migrated decision journal from YAML to JSON, removed serde_yaml dependency"}
{"id":"higher-peak-awt","title":"Implement recursion prevention","description":"Why: Superego's Claude session must not trigger hooks that call superego. Done when: Hooks detect .superego/ in transcript path and skip, or use session ID filtering.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:14:38.247985+01:00","updated_at":"2025-12-11T22:49:00.601179+01:00","closed_at":"2025-12-11T22:49:00.601179+01:00","dependencies":[{"issue_id":"higher-peak-awt","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:16:51.248466+01:00","created_by":"drazen"}]}
{"id":"higher-peak-b0n","title":"Harmonize superego system with feedback-first flow","description":"Why: System evolved from phase-gating to rich feedback. Done when: Remove Phase enum, simplify state.rs, clean up decision.rs, evaluate.rs uses new prompt, hooks deliver feedback, claude.rs handles natural language response. Single coherent flow: Stop→LLM evaluate→feedback queue→UserPromptSubmit→inject to Claude.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-11T21:53:55.726689+01:00","updated_at":"2025-12-11T22:06:16.861892+01:00","closed_at":"2025-12-11T22:06:16.861892+01:00","dependencies":[{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-6dy","type":"blocks","created_at":"2025-12-11T21:54:09.318651+01:00","created_by":"drazen"},{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-5xr","type":"blocks","created_at":"2025-12-11T21:54:14.469493+01:00","created_by":"drazen"},{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-dzi","type":"blocks","created_at":"2025-12-11T21:54:19.59821+01:00","created_by":"drazen"}]}
{"id":"higher-peak-bnm","title":"Phase 1: Database layer (SQLite schema)","description":"Why: Foundation for daemon state. Done when: rusqlite added, sessions/feedback tables, CRUD ops work.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:19:11.396762+01:00","updated_at":"2025-12-16T22:22:14.30522+01:00","closed_at":"2025-12-16T22:22:14.30522+01:00"}
{"id":"higher-peak-bs8","title":"Auto-update hooks when outdated","description":"Why: Users don't know hooks need updating after upgrade. Done when: sg check command exists, SessionStart auto-updates hooks, hash-based comparison detects changes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T18:04:51.251787+01:00","updated_at":"2025-12-17T18:07:38.177929+01:00","closed_at":"2025-12-17T18:07:38.177929+01:00","close_reason":"Added sg check command with auto-update, session-start.sh calls it on startup"}
{"id":"higher-peak-cdz","title":"Define override scope and duration","description":"Why: When user overrides, unclear how long it lasts. Done when: Decided and implemented - options: single action, rest of session, until phase changes. Probably: override allows one blocked action, then re-evaluates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:16:28.962909+01:00","updated_at":"2025-12-11T18:18:56.131616+01:00","closed_at":"2025-12-11T18:18:56.131616+01:00"}
{"id":"higher-peak-cif","title":"Remove regex dependency","description":"Why: Single usage in reader.rs, adds ~500KB to binary. Done when: Replaced with simple string search, Cargo.toml updated, tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:20:00.2643+01:00","updated_at":"2025-12-18T16:29:06.488828+01:00","closed_at":"2025-12-18T16:29:06.488828+01:00","close_reason":"Removed regex dep, replaced with string-based dedupe_system_reminders (keeps last reminder)"}
{"id":"higher-peak-clq","title":"Add Claude reaction tracking to sg retro curated mode","description":"Why: Users want to see if Claude accepted/rejected superego feedback. Done when: Curated mode shows acceptance indicator and brief reaction reasoning for each moment.","status":"closed","priority":1,"issue_type":"feature","assignee":"drazen","created_at":"2025-12-24T01:42:50.439185+01:00","updated_at":"2025-12-24T01:52:06.912601+01:00","closed_at":"2025-12-24T01:52:06.912601+01:00","close_reason":"Implemented: curated mode now shows Claude's acceptance/reaction with styled indicators"}
{"id":"higher-peak-ct7","title":"sg audit needs progress indicator","description":"The audit command looks like it hanged because there's no output while Claude is analyzing. Add a progress indicator or status message like 'Analyzing N decisions...' before the LLM call.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T23:38:53.053336+01:00","updated_at":"2025-12-17T23:50:03.521078+01:00","closed_at":"2025-12-17T23:50:03.521078+01:00","close_reason":"Added progress indicator in main.rs:403"}
{"id":"higher-peak-cv0","title":"Fix pre-tool-use hook PHASE reference","description":"Why: Hook still checks for PHASE in sg check output, but phase was removed. Done when: Hook updated to not reference phase, just uses decision/reason.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-11T22:05:44.423958+01:00","updated_at":"2025-12-11T22:24:31.711952+01:00","closed_at":"2025-12-11T22:24:31.711952+01:00"}
{"id":"higher-peak-d20","title":"Explore using bd for superego phase tracking","description":"Why: bd already has issues, status tracking, and git sync. Could model phases as issue states or use bd's infrastructure instead of custom YAML/JSON. Done when: Documented pros/cons of bd-backed vs custom state, decision made on whether to pivot. Consider: phase as issue status, decisions as issue comments, session context as issue description.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T19:33:38.496553+01:00","updated_at":"2025-12-11T21:42:24.144839+01:00","closed_at":"2025-12-11T21:42:24.144839+01:00"}
{"id":"higher-peak-ddl","title":"Implement PreCompact hook for state preservation","description":"Why: When Claude compacts context, transcript is truncated. Superego must update its tracking before compaction. Done when: PreCompact hook calls sg precompact, which reads full transcript and writes summary decision to journal capturing current understanding (phase, scope, key decisions).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:34:21.8048+01:00","updated_at":"2025-12-11T22:59:32.409386+01:00","closed_at":"2025-12-11T22:59:32.409386+01:00","dependencies":[{"issue_id":"higher-peak-ddl","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:10.111562+01:00","created_by":"drazen"}]}
{"id":"higher-peak-dpb","title":"Add OH API client module (oh.rs)","description":"Why: Need HTTP client for OH API calls. Done when: oh.rs exists with functions for get_contexts, get_endeavors, log_decision. Simple reqwest-based client with Bearer auth.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:57:39.752473+01:00","updated_at":"2025-12-21T12:03:39.180668+01:00","closed_at":"2025-12-21T12:03:39.180668+01:00","close_reason":"Created oh.rs with OhClient, OhConfig, and API methods for contexts/endeavors/logs"}
{"id":"higher-peak-dzi","title":"Remove Phase enum and state machine","description":"Why: Phase (Exploring/Discussing/Ready) was for LLM-based conversation analysis. Now using bd state directly. Done when: Phase enum removed, state.rs simplified, decision.rs cleaned up, check uses bd state directly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T21:41:37.591176+01:00","updated_at":"2025-12-11T22:03:53.574197+01:00","closed_at":"2025-12-11T22:03:53.574197+01:00"}
{"id":"higher-peak-e89","title":"Implement sg context-inject command","description":"Why: SessionStart hook needs to inject superego context into Claude. Done when: Outputs behavioral contract + recent decisions summary as additionalContext for Claude.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:23:20.258193+01:00","updated_at":"2025-12-12T21:44:39.89531+01:00","closed_at":"2025-12-12T21:44:39.89531+01:00","dependencies":[{"issue_id":"higher-peak-e89","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:32.001237+01:00","created_by":"drazen"},{"issue_id":"higher-peak-e89","depends_on_id":"higher-peak-4ik","type":"blocks","created_at":"2025-12-11T18:24:52.602841+01:00","created_by":"drazen"}]}
{"id":"higher-peak-fas","title":"Remove dead base decisions support","description":"Why: Base decisions dir is never written to - dead code. Done when: read_all_sessions only scans session dirs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:00:46.245255+01:00","updated_at":"2025-12-18T15:04:09.584406+01:00","closed_at":"2025-12-18T15:04:09.584406+01:00","close_reason":"Removed dead base decisions support from read_all_sessions(), updated CLAUDE.md"}
{"id":"higher-peak-g1h","title":"Implement override state tracking in sg check","description":"Why: sg check needs to know if override is pending. Done when: sg override sets pending_override in state.json, sg check allows one action then clears it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:23:56.178839+01:00","updated_at":"2025-12-11T19:26:04.335594+01:00","closed_at":"2025-12-11T19:26:04.335594+01:00","dependencies":[{"issue_id":"higher-peak-g1h","depends_on_id":"higher-peak-v2i","type":"blocks","created_at":"2025-12-11T18:24:42.314744+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ggj","title":"Design superego system prompt","description":"Why: Defines superego's personality and evaluation criteria. Done when: prompt.md template exists, covers: phase detection, unknown tracking, JSON output format. IMPORTANT: If first message is ambiguous (e.g. 'fix the bug'), superego should indicate opportunity for Claude to clarify scope before proceeding.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:15.728032+01:00","updated_at":"2025-12-11T19:07:50.535159+01:00","closed_at":"2025-12-11T19:07:50.535159+01:00","dependencies":[{"issue_id":"higher-peak-ggj","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:15.575755+01:00","created_by":"drazen"}]}
{"id":"higher-peak-gmx","title":"Create SessionStart hook for context injection","description":"Why: Inject superego behavioral contract into Claude's context. Done when: Hook returns additionalContext with obligations, resumed session shows decision summary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:44.975752+01:00","updated_at":"2025-12-12T21:45:06.577986+01:00","closed_at":"2025-12-12T21:45:06.577986+01:00","dependencies":[{"issue_id":"higher-peak-gmx","depends_on_id":"higher-peak-4ik","type":"blocks","created_at":"2025-12-11T17:51:15.43955+01:00","created_by":"drazen"},{"issue_id":"higher-peak-gmx","depends_on_id":"higher-peak-e89","type":"blocks","created_at":"2025-12-11T18:24:57.760663+01:00","created_by":"drazen"}]}
{"id":"higher-peak-gow","title":"Add timeout to Claude CLI invocation","description":"Why: If Claude hangs, hooks block indefinitely. Done when: Configurable timeout (config.yaml timeout_ms) is implemented in claude.rs invoke(). See src/claude.rs:109.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T01:33:43.6795+01:00","updated_at":"2025-12-17T01:39:55.524658+01:00","closed_at":"2025-12-17T01:39:55.524658+01:00","close_reason":"Added 5 minute timeout to Claude invocation with polling loop"}
{"id":"higher-peak-gxt","title":"Refocus superego prompt on strategic alignment","description":"Rewrite prompt.md with new structure: Intent Clarity Gate (X-Y problem), Five Checks (Necessary, Beyond Nearest Peak, Sufficient, Fits Goal, Open Horizons), Supporting Checks, Evidence-based Method. Removes procedural/tactical noise.","status":"closed","priority":1,"issue_type":"task","assignee":"drazen","created_at":"2025-12-12T21:39:44.594766+01:00","updated_at":"2025-12-12T21:40:37.784365+01:00","closed_at":"2025-12-12T21:40:37.784365+01:00"}
{"id":"higher-peak-h6o","title":"Enhance sg context with OH endeavor data","description":"Why: Bidirectional OH integration - sg currently logs TO OH but doesn't read FROM it. Done when: sg can fetch endeavor details and recent logs to enhance evaluation context, allowing superego to evaluate work against strategic goals.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T12:38:07.640579+01:00","updated_at":"2025-12-21T12:56:44.896989+01:00","closed_at":"2025-12-21T12:56:44.896989+01:00","close_reason":"Implemented bidirectional OH integration - sg now reads endeavor context and recent logs"}
{"id":"higher-peak-iet","title":"Phase 3: CLI commands","description":"Why: Hook/daemon interface. Done when: register, heartbeat, feedback, daemon start/stop/status commands work.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:19:21.687494+01:00","updated_at":"2025-12-16T23:25:13.398945+01:00","closed_at":"2025-12-16T23:25:13.398945+01:00","dependencies":[{"issue_id":"higher-peak-iet","depends_on_id":"higher-peak-bnm","type":"blocks","created_at":"2025-12-16T22:19:48.048426+01:00","created_by":"drazen"},{"issue_id":"higher-peak-iet","depends_on_id":"higher-peak-w2j","type":"blocks","created_at":"2025-12-16T22:19:53.203834+01:00","created_by":"drazen"}]}
{"id":"higher-peak-iqj","title":"Setup cargo packaging and installation","description":"Why: Users need to install sg CLI. Done when: cargo install works, Cargo.toml has proper metadata, README has install instructions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:24:11.296693+01:00","updated_at":"2025-12-12T15:38:08.417295+01:00","closed_at":"2025-12-12T15:38:08.417295+01:00","dependencies":[{"issue_id":"higher-peak-iqj","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:47.463528+01:00","created_by":"drazen"}]}
{"id":"higher-peak-j6z","title":"Hook: consume cached feedback in Stop hook","description":"Why: Instant feedback delivery. Done when: Stop hook checks cache first, only runs sg evaluate-llm as fallback.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T13:57:33.021481+01:00","updated_at":"2025-12-22T14:01:00.024814+01:00","closed_at":"2025-12-22T14:01:00.024814+01:00","close_reason":"Parked: investigating transcript lag first","dependencies":[{"issue_id":"higher-peak-j6z","depends_on_id":"higher-peak-1k7","type":"blocks","created_at":"2025-12-22T13:58:16.904323+01:00","created_by":"drazen"}]}
{"id":"higher-peak-j7g","title":"Phase 4: Hook updates","description":"Why: Thin client model. Done when: Hooks call CLI commands, no synchronous eval.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:19:26.846109+01:00","updated_at":"2025-12-16T23:28:00.0245+01:00","closed_at":"2025-12-16T23:28:00.0245+01:00","dependencies":[{"issue_id":"higher-peak-j7g","depends_on_id":"higher-peak-iet","type":"blocks","created_at":"2025-12-16T22:19:58.33986+01:00","created_by":"drazen"}]}
{"id":"higher-peak-jd3","title":"Add stale lock detection to pre-tool-use.sh","description":"Why: If process crashes while holding lock, subsequent evals blocked until manual intervention. Done when: Lock file age checked and stale locks (\u003e5 min) auto-removed.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T14:45:36.633294+01:00","updated_at":"2025-12-22T14:45:36.633294+01:00"}
{"id":"higher-peak-jj5","title":"Fix: last_evaluated should use transcript timestamp, not Utc::now()","description":"Why: Messages written during LLM eval get skipped because last_evaluated is set to completion time, not read time. Done when: last_evaluated records max timestamp from evaluated messages, not Utc::now().","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T14:09:29.542973+01:00","updated_at":"2025-12-22T14:12:58.694777+01:00","closed_at":"2025-12-22T14:12:58.694777+01:00","close_reason":"Fixed: last_evaluated now uses transcript read time, not completion time"}
{"id":"higher-peak-k3p","title":"Add timeout to OH HTTP requests","description":"Why: HTTP calls without timeout can block hook path if OH server hangs. Done when: All attohttpc calls have explicit timeout (5s default).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T12:33:38.808972+01:00","updated_at":"2025-12-21T13:05:28.085546+01:00","closed_at":"2025-12-21T13:05:28.085546+01:00","close_reason":"All OH HTTP methods now have 5s timeout"}
{"id":"higher-peak-khw","title":"Investigate cost/usage metadata from Claude calls","description":"Why: Users should see superego's LLM usage. Done when: Investigated if Claude CLI exposes token counts/cost, implemented usage tracking if available.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T18:35:39.078714+01:00","updated_at":"2025-12-12T21:45:27.425445+01:00","closed_at":"2025-12-12T21:45:27.425445+01:00","dependencies":[{"issue_id":"higher-peak-khw","depends_on_id":"higher-peak-1sa","type":"blocks","created_at":"2025-12-11T18:36:35.802467+01:00","created_by":"drazen"}]}
{"id":"higher-peak-kpm","title":"Add optional Open Horizons integration to superego","description":"Why: Enable higher-level coordination by logging superego decisions to OH endeavors. Done when: sg detects OH availability, discovers relevant endeavor via LLM matching, and logs decisions there. Notes: Direct API approach (not MCP client), graceful degradation when OH unavailable.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T11:56:56.900351+01:00","updated_at":"2025-12-21T12:22:42.188442+01:00","closed_at":"2025-12-21T12:22:42.188442+01:00","close_reason":"Feature complete: optional OH integration via oh_endeavor_id in config.yaml or OH_ENDEAVOR_ID env var","dependencies":[{"issue_id":"higher-peak-kpm","depends_on_id":"higher-peak-9a6","type":"blocks","created_at":"2025-12-21T11:58:27.825153+01:00","created_by":"drazen"}]}
{"id":"higher-peak-lsm","title":"Document Claude behavioral contract","description":"Why: Claude needs clear instructions on how to behave when blocked. Done when: Markdown doc specifies: surface conflicts to user, present options, call acknowledge/override appropriately.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:57.248247+01:00","updated_at":"2025-12-12T21:44:50.328166+01:00","closed_at":"2025-12-12T21:44:50.328166+01:00"}
{"id":"higher-peak-ly6","title":"Daemon: CLI commands (start/stop/status)","description":"Why: User control over daemon. Done when: sg daemon start/stop/status work, daemon runs detached with pidfile.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T13:57:27.734702+01:00","updated_at":"2025-12-22T14:01:00.023048+01:00","closed_at":"2025-12-22T14:01:00.023048+01:00","close_reason":"Parked: investigating transcript lag first"}
{"id":"higher-peak-mm5","title":"Remove or improve test_stdout_empty_without_pipe test","description":"PR nitpick: Test in claude.rs:184-199 documents the bug but doesn't actually verify the problematic behavior. Consider removing and keeping only code comment, or making it assert something meaningful.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T23:34:45.239169+01:00","updated_at":"2025-12-17T23:39:59.411631+01:00","closed_at":"2025-12-17T23:39:59.411631+01:00","close_reason":"Removed test - AIDEV-NOTE in main code already documents the fix"}
{"id":"higher-peak-o7e","title":"Define context window strategy for LLM evaluation","description":"Why: Need to decide how much transcript to send to superego LLM. Done when: Strategy documented and implemented - options: last N messages, last N tokens, summary + recent, sliding window.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:16:13.526379+01:00","updated_at":"2025-12-11T22:54:38.201873+01:00","closed_at":"2025-12-11T22:54:38.201873+01:00","dependencies":[{"issue_id":"higher-peak-o7e","depends_on_id":"higher-peak-uws","type":"blocks","created_at":"2025-12-11T18:16:56.40598+01:00","created_by":"drazen"}]}
{"id":"higher-peak-obb","title":"Implement retro.rs default mode","description":"Why: Generate HTML from all decisions without LLM. Done when: decisions_to_moments and generate_html work, HTML opens in browser.","status":"closed","priority":1,"issue_type":"feature","assignee":"claude","created_at":"2025-12-24T01:01:52.145454+01:00","updated_at":"2025-12-24T01:13:15.531506+01:00","closed_at":"2025-12-24T01:13:15.531506+01:00","close_reason":"Default mode implemented and tested","dependencies":[{"issue_id":"higher-peak-obb","depends_on_id":"higher-peak-2o0","type":"blocks","created_at":"2025-12-24T01:02:10.227339+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ofs","title":"Replace session resumption with explicit context carryover","description":"Superego session resumption accumulates context causing 'Prompt is too long' errors. Replace with isolated evaluations + explicit carryover: last 5 mins of previous messages + last 2 decisions.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-23T11:52:11.277896+01:00","updated_at":"2025-12-23T11:56:57.544931+01:00","closed_at":"2025-12-23T11:56:57.544931+01:00","close_reason":"Implemented: isolated evaluations with carryover context (last 2 decisions + last 5min messages)"}
{"id":"higher-peak-oin","title":"Implement failure handling for sg evaluate","description":"Why: LLM calls can fail/timeout. Done when: Timeout handling, fallback to safe default (EXPLORING), error logging, user notification on repeated failures.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:15:15.971888+01:00","updated_at":"2025-12-11T19:35:46.53174+01:00","closed_at":"2025-12-11T19:35:46.53174+01:00","dependencies":[{"issue_id":"higher-peak-oin","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:18:07.687705+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ov5","title":"End-to-end integration test","description":"Why: Verify full flow works. Done when: Test covers: hook blocks action → Claude surfaces conflict → user overrides → hook allows retry.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T17:48:10.741668+01:00","updated_at":"2025-12-12T21:45:32.66294+01:00","closed_at":"2025-12-12T21:45:32.66294+01:00","dependencies":[{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-yr1","type":"blocks","created_at":"2025-12-11T17:51:20.617469+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-gmx","type":"blocks","created_at":"2025-12-11T17:51:25.719328+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-7sh","type":"blocks","created_at":"2025-12-11T18:11:00.629461+01:00","created_by":"drazen"}]}
{"id":"higher-peak-peo","title":"Remove evaluate-bd (redundant)","description":"Why: evaluate-bd is redundant - check directly queries bd, rich feedback comes from evaluate-llm with bd context. Done when: evaluate-bd function and command removed, Stop hook calls evaluate-llm, task 90t closed as obsolete.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:09:10.54916+01:00","updated_at":"2025-12-11T22:45:32.167282+01:00","closed_at":"2025-12-11T22:45:32.167282+01:00","dependencies":[{"issue_id":"higher-peak-peo","depends_on_id":"higher-peak-toj","type":"blocks","created_at":"2025-12-11T22:09:20.663624+01:00","created_by":"drazen"}]}
{"id":"higher-peak-pls","title":"Remove or implement stub CLI commands","description":"Why: Acknowledge, ContextInject, Disable, Enable commands output 'not yet implemented' which confuses users. Done when: Either implemented fully or removed from CLI. See main.rs:142-143, 177-178, 258-262.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T01:33:36.164191+01:00","updated_at":"2025-12-17T01:37:25.284338+01:00","closed_at":"2025-12-17T01:37:25.284338+01:00","close_reason":"Removed Acknowledge, ContextInject, Disable, Enable stub commands"}
{"id":"higher-peak-pvi","title":"Implement bd-based phase detection","description":"Why: Observable phase via bd state, not LLM guessing. Done when: No in_progress tasks = read-only, tasks in_progress = check alignment, task creation requires confirmation. Phase from workflow artifacts not conversation analysis.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-11T21:28:43.806154+01:00","updated_at":"2025-12-11T21:38:31.477404+01:00","closed_at":"2025-12-11T21:38:31.477404+01:00"}
{"id":"higher-peak-s0n","title":"Implement detailed audit trail logging","description":"Why: Need visibility into superego decisions for debugging. Done when: Every evaluate/check/override writes to .superego/audit.log with timestamp, input, decision, reason.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:34:50.984317+01:00","updated_at":"2025-12-12T21:44:29.414517+01:00","closed_at":"2025-12-12T21:44:29.414517+01:00","dependencies":[{"issue_id":"higher-peak-s0n","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:20.402384+01:00","created_by":"drazen"}]}
{"id":"higher-peak-toj","title":"Enhance superego prompt with bd context","description":"Why: LLM should know current bd task(s) to evaluate alignment. Done when: Prompt includes current task title/description, LLM can flag scope drift, feedback references task context. evaluate-llm passes bd state to prompt.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-11T22:07:59.272262+01:00","updated_at":"2025-12-11T22:42:40.978224+01:00","closed_at":"2025-12-11T22:42:40.978224+01:00"}
{"id":"higher-peak-tuw","title":"Add tests for get_messages_in_window()","description":"Add tests for edge cases: empty window, no matching session_id, malformed timestamps.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T12:10:38.809947+01:00","updated_at":"2025-12-23T12:24:58.026506+01:00","closed_at":"2025-12-23T12:24:58.026506+01:00","close_reason":"Added 4 tests for get_messages_in_window"}
{"id":"higher-peak-u68","title":"Improve transcript context for superego","description":"Why: Superego was missing context. Done when: summary, thinking, and tool results included in evaluation.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T01:21:58.274671+01:00","updated_at":"2025-12-17T01:23:28.372354+01:00","closed_at":"2025-12-17T01:23:28.372354+01:00"}
{"id":"higher-peak-ujd","title":"Add timeout to log_decision()","description":"Why: In hook path - can block Claude Code if OH hangs. Done when: 5s timeout added.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T13:04:06.206579+01:00","updated_at":"2025-12-21T13:05:28.085151+01:00","closed_at":"2025-12-21T13:05:28.085151+01:00","close_reason":"All OH HTTP methods now have 5s timeout"}
{"id":"higher-peak-uws","title":"Implement transcript JSONL reader","description":"Why: Superego needs to read Claude Code conversation history. Done when: Can parse transcript_path JSONL, extract messages with roles/content.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:10.227196+01:00","updated_at":"2025-12-11T19:17:05.65215+01:00","closed_at":"2025-12-11T19:17:05.65215+01:00","dependencies":[{"issue_id":"higher-peak-uws","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:13.003014+01:00","created_by":"drazen"}]}
{"id":"higher-peak-v2i","title":"Implement sg check command","description":"Why: Fast gate for write tools. Done when: Reads .superego/state.json (cached phase), returns allow/block based on phase vs tool type. NO LLM call - just reads cached state from evaluate.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:26.701874+01:00","updated_at":"2025-12-11T19:24:46.901462+01:00","closed_at":"2025-12-11T19:24:46.901462+01:00","dependencies":[{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:36.82027+01:00","created_by":"drazen"},{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:10:41.366504+01:00","created_by":"drazen"}]}
{"id":"higher-peak-v41","title":"Add OH detection and configuration","description":"Why: sg must gracefully detect OH availability. Done when: checks OH_API_URL + OH_API_KEY env vars, optional config.yaml support, skips integration when unavailable.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:57:44.995801+01:00","updated_at":"2025-12-21T12:04:07.571848+01:00","closed_at":"2025-12-21T12:04:07.571848+01:00","close_reason":"Detection via OH_API_URL + OH_API_KEY env vars implemented in OhConfig::from_env() and is_configured()","dependencies":[{"issue_id":"higher-peak-v41","depends_on_id":"higher-peak-dpb","type":"blocks","created_at":"2025-12-21T11:58:07.085178+01:00","created_by":"drazen"}]}
{"id":"higher-peak-vgt","title":"Add test for transcript_read_at race condition fix","description":"Why: AIDEV-NOTE explains the design but no test demonstrates it. Done when: Test verifies messages written during eval are caught by next eval.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T14:45:47.303503+01:00","updated_at":"2025-12-22T16:16:34.001638+01:00","closed_at":"2025-12-22T16:16:34.001638+01:00","close_reason":"Added two tests for race condition fix"}
{"id":"higher-peak-w2j","title":"Phase 2: Daemon core (poll loop)","description":"Why: Background evaluation. Done when: Daemon runs, polls sessions, triggers eval, writes feedback.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:19:16.546219+01:00","updated_at":"2025-12-16T22:25:22.170827+01:00","closed_at":"2025-12-16T22:25:22.170827+01:00","dependencies":[{"issue_id":"higher-peak-w2j","depends_on_id":"higher-peak-bnm","type":"blocks","created_at":"2025-12-16T22:19:42.958398+01:00","created_by":"drazen"}]}
{"id":"higher-peak-w47","title":"Daemon: read transcript incrementally since last eval","description":"Why: Reading last 50 messages wastes tokens re-reading content. Done when: daemon tracks last_evaluated position and only reads new messages since then.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T00:16:41.663969+01:00","updated_at":"2025-12-17T00:59:00.259541+01:00","closed_at":"2025-12-17T00:59:00.259541+01:00"}
{"id":"higher-peak-x3h","title":"Move prompt.md to plugin directory","description":"Why: Prompt updates should flow to users without binary/plugin updates. Done when: session-start.sh fetches prompt from GitHub and stores in .superego/prompt.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T23:56:19.109725+01:00","updated_at":"2025-12-19T00:08:31.448158+01:00","closed_at":"2025-12-19T00:08:31.448158+01:00","close_reason":"Session-start hook now fetches prompt from GitHub"}
{"id":"higher-peak-ya8","title":"Handle cold start (first evaluation)","description":"Why: First sg evaluate has no prior context. Done when: Detects missing state.json, primes superego with project summary from decision journal, defaults to EXPLORING phase.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:15:47.219+01:00","updated_at":"2025-12-11T19:35:51.677725+01:00","closed_at":"2025-12-11T19:35:51.677725+01:00","dependencies":[{"issue_id":"higher-peak-ya8","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:18:12.820842+01:00","created_by":"drazen"}]}
{"id":"higher-peak-yh5","title":"Add retro curated mode (LLM)","description":"Why: LLM-curated key moments for demos. Done when: --curated flag triggers LLM to pick key moments with summaries (no fixed limit).","status":"closed","priority":2,"issue_type":"feature","assignee":"claude","created_at":"2025-12-24T01:01:57.437805+01:00","updated_at":"2025-12-24T01:18:41.631047+01:00","closed_at":"2025-12-24T01:18:41.631047+01:00","close_reason":"Curated mode implemented with Haiku, tested with 43-decision session -\u003e 33 curated moments","dependencies":[{"issue_id":"higher-peak-yh5","depends_on_id":"higher-peak-obb","type":"blocks","created_at":"2025-12-24T01:02:15.405706+01:00","created_by":"drazen"}]}
{"id":"higher-peak-yr1","title":"Create PreToolUse hook script","description":"Why: Gate Claude actions via hook. Done when: Hook reads stdin JSON, calls sg check, returns permissionDecision deny/allow with reason.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:47:34.398443+01:00","updated_at":"2025-12-11T21:06:48.23752+01:00","closed_at":"2025-12-11T21:06:48.23752+01:00","dependencies":[{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-v2i","type":"blocks","created_at":"2025-12-11T17:51:10.287715+01:00","created_by":"drazen"},{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:09:58.318623+01:00","created_by":"drazen"}]}
