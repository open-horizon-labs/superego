{"id":"higher-peak-00p","title":"Implement sg disable/enable escape hatch","description":"Why: User needs to bypass superego if it malfunctions. Done when: sg disable sets flag, hooks check flag and skip, SUPEREGO_DISABLED env var also works.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T18:15:31.442812+01:00","updated_at":"2025-12-11T18:15:31.442812+01:00","dependencies":[{"issue_id":"higher-peak-00p","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:17:21.244976+01:00","created_by":"drazen"}]}
{"id":"higher-peak-0m1","title":"Implement sg evaluate command (UserPromptSubmit)","description":"Why: Infer phase from user message, cache to state.json. Done when: Reads transcript + new user message, calls superego LLM, writes phase to .superego/state.json. Called by UserPromptSubmit hook.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:44.738794+01:00","updated_at":"2025-12-11T19:35:41.396155+01:00","closed_at":"2025-12-11T19:35:41.396155+01:00","close_reason":"Evaluate command implemented: reads transcript, calls Claude, updates state, outputs JSON","dependencies":[{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:27.482082+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-1sa","type":"blocks","created_at":"2025-12-11T18:09:32.613686+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-465","type":"blocks","created_at":"2025-12-11T18:09:37.759647+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-uws","type":"blocks","created_at":"2025-12-11T18:09:42.89031+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-oin","type":"blocks","created_at":"2025-12-11T18:17:11.810764+01:00","created_by":"drazen"},{"issue_id":"higher-peak-0m1","depends_on_id":"higher-peak-ya8","type":"blocks","created_at":"2025-12-11T18:17:36.708414+01:00","created_by":"drazen"}]}
{"id":"higher-peak-1sa","title":"Implement Claude CLI invocation from Rust","description":"Why: Core evaluation engine - call claude CLI with context. Done when: Can invoke claude CLI, pass system prompt + user message, parse JSON response (handle prose around JSON robustly), handle errors/timeouts. NOTE: Verify correct CLI flags, may need adaptation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:34.307856+01:00","updated_at":"2025-12-11T19:30:06.806934+01:00","closed_at":"2025-12-11T19:30:06.806934+01:00","close_reason":"Claude CLI invocation implemented with JSON parsing, session support, and evaluation extraction.","dependencies":[{"issue_id":"higher-peak-1sa","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:20.712011+01:00","created_by":"drazen"}]}
{"id":"higher-peak-1ws","title":"Simplify Feedback module - remove Severity","description":"Why: Severity enum has unused Block/Info variants, only Warning used. No blocking anymore. Done when: Severity removed, Feedback is just message+context, tests updated.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:05:49.595552+01:00","updated_at":"2025-12-11T22:28:24.14644+01:00","closed_at":"2025-12-11T22:28:24.14644+01:00","close_reason":"Removed Severity enum, simplified to message+context only"}
{"id":"higher-peak-24g","title":"Implement model selection config","description":"Why: Users may want faster/cheaper model for superego. Done when: .superego/config.yaml supports model setting, defaults to Claude Code default, sg evaluate uses configured model.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T18:35:12.742893+01:00","updated_at":"2025-12-11T18:35:12.742893+01:00","dependencies":[{"issue_id":"higher-peak-24g","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:30.678605+01:00","created_by":"drazen"}]}
{"id":"higher-peak-2ub","title":"Ensure rich superego feedback reaches Claude","description":"Why: Superego is a metacognitive advisor - feedback must actually steer Claude's behavior. Done when: Feedback is injected as context Claude sees, Claude acknowledges/incorporates feedback in its responses, feedback covers approach/alignment not just write gating.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-11T21:41:49.373698+01:00","updated_at":"2025-12-11T21:41:49.373698+01:00"}
{"id":"higher-peak-33t","title":"Implement state evaluation heuristics","description":"Why: Optional fast-path before LLM call. Done when: Quick checks (action count, explicit 'wait' phrases) can skip LLM call when clearly fine. OPTIONAL - LLM handles this if not implemented.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-11T17:47:25.787841+01:00","updated_at":"2025-12-11T17:58:51.755062+01:00","dependencies":[{"issue_id":"higher-peak-33t","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:23.309776+01:00","created_by":"drazen"}]}
{"id":"higher-peak-419","title":"Implement sg override command","description":"Why: Claude calls this after user approves override. Done when: Writes override_granted decision with reason, allows blocked action to proceed.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:54.160258+01:00","updated_at":"2025-12-11T17:46:54.160258+01:00","dependencies":[{"issue_id":"higher-peak-419","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:56.740762+01:00","created_by":"drazen"},{"issue_id":"higher-peak-419","depends_on_id":"higher-peak-cdz","type":"blocks","created_at":"2025-12-11T18:17:41.859111+01:00","created_by":"drazen"}]}
{"id":"higher-peak-465","title":"Implement superego session management","description":"Why: Persist superego's own context across checks. Done when: Session stored in .superego/session/, --continue flag used to maintain context, session survives across main Claude sessions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:47.313652+01:00","updated_at":"2025-12-11T19:35:56.839493+01:00","closed_at":"2025-12-11T19:35:56.839493+01:00","close_reason":"Session management: saves/loads superego session ID from .superego/session/","dependencies":[{"issue_id":"higher-peak-465","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:25.852403+01:00","created_by":"drazen"}]}
{"id":"higher-peak-4ik","title":"Implement sg history command","description":"Why: Context recovery - Claude can query past decisions. Done when: Reads .superego/decisions/*, returns chronological list with optional limit.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:02.982551+01:00","updated_at":"2025-12-11T17:47:02.982551+01:00","dependencies":[{"issue_id":"higher-peak-4ik","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:51:01.868753+01:00","created_by":"drazen"}]}
{"id":"higher-peak-4kz","title":"General dead code cleanup","description":"Why: Various unused fields/functions across modules (see cargo build warnings). Done when: All unused warnings resolved or explicitly allowed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T22:06:05.073719+01:00","updated_at":"2025-12-11T22:35:21.694449+01:00","closed_at":"2025-12-11T22:35:21.694449+01:00","close_reason":"Removed dead code: override mechanism, unused functions, simplified structs"}
{"id":"higher-peak-4mi","title":"Support nested .superego/ discovery (future)","description":"Why: User might have project/.superego/ and project/subdir/.superego/. Future: Implement discovery logic like beads does - walk up to find nearest .superego/.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-11T18:36:00.391634+01:00","updated_at":"2025-12-11T18:36:00.391634+01:00"}
{"id":"higher-peak-5xr","title":"Remove vestigial SEVERITY/blocking logic from hooks","description":"Why: No more hard gates, just feedback injection. Done when: user-prompt-submit.sh removes SEVERITY checks, always injects feedback as context, no exit 2 blocking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T21:53:50.56049+01:00","updated_at":"2025-12-11T21:58:09.004389+01:00","closed_at":"2025-12-11T21:58:09.004389+01:00","close_reason":"Simplified user-prompt-submit.sh - removed SEVERITY checks and exit 2 blocking, now just injects feedback as context"}
{"id":"higher-peak-6dy","title":"Update LLM evaluation for natural language feedback","description":"Why: New prompt outputs rich natural language, not JSON. Done when: evaluate command calls LLM, gets natural language response, writes to feedback queue. No JSON parsing, no phase extraction.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T21:53:45.409809+01:00","updated_at":"2025-12-11T21:57:12.594917+01:00","closed_at":"2025-12-11T21:57:12.594917+01:00","close_reason":"Added evaluate_llm() and sg evaluate-llm command - calls Claude, gets natural language feedback, writes to queue"}
{"id":"higher-peak-6mx","title":"Remove dead JSON parsing from claude.rs","description":"Why: extract_json, parse_evaluation, SuperegoEvaluation unused since we use natural language feedback. Done when: Dead code removed, module simplified.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:05:54.770587+01:00","updated_at":"2025-12-11T22:29:20.391704+01:00","closed_at":"2025-12-11T22:29:20.391704+01:00","close_reason":"Removed SuperegoEvaluation, Concern, extract_json, parse_evaluation, timeout_secs"}
{"id":"higher-peak-6pg","title":"Verify Claude CLI invocation syntax","description":"Why: Need correct flags for non-interactive Claude calls. Done when: Tested claude --print (or correct flag), documented in ARCHITECTURE.md, handles session continuation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:35:00.923189+01:00","updated_at":"2025-12-11T19:30:11.96026+01:00","closed_at":"2025-12-11T19:30:11.96026+01:00","close_reason":"Verified: claude -p --output-format json --system-prompt works. Documented flags.","dependencies":[{"issue_id":"higher-peak-6pg","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:25.541736+01:00","created_by":"drazen"}]}
{"id":"higher-peak-6wt","title":"Implement sg reset command","description":"Why: Recovery from corrupted state. Done when: Clears state.json, optionally clears session/, preserves decisions/ journal.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T18:23:36.991851+01:00","updated_at":"2025-12-11T18:23:36.991851+01:00","dependencies":[{"issue_id":"higher-peak-6wt","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:37.159522+01:00","created_by":"drazen"}]}
{"id":"higher-peak-7sh","title":"Create UserPromptSubmit hook","description":"Why: Trigger phase evaluation on every user message. Done when: Hook calls sg evaluate with transcript path, runs before Claude responds.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:08:56.264172+01:00","updated_at":"2025-12-11T21:06:53.378963+01:00","closed_at":"2025-12-11T21:06:53.378963+01:00","close_reason":"UserPromptSubmit hook script created: calls sg evaluate on each user message","dependencies":[{"issue_id":"higher-peak-7sh","depends_on_id":"higher-peak-0m1","type":"blocks","created_at":"2025-12-11T18:09:48.02664+01:00","created_by":"drazen"}]}
{"id":"higher-peak-88l","title":"Implement sg acknowledge command","description":"Why: Claude calls this to accept feedback and clear the queue. Done when: Writes feedback_accepted decision, clears pending state.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:46:45.676276+01:00","updated_at":"2025-12-11T17:46:45.676276+01:00","dependencies":[{"issue_id":"higher-peak-88l","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:51.593484+01:00","created_by":"drazen"}]}
{"id":"higher-peak-8lw","title":"Implement sg init command","description":"Why: Users need to initialize .superego/ in their project. Done when: Creates .superego/ dir, writes default prompt.md (from embedded default), empty state.json (phase: exploring), decisions/ folder, config.yaml with defaults.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:23:04.477281+01:00","updated_at":"2025-12-11T19:27:50.487336+01:00","closed_at":"2025-12-11T19:27:50.487336+01:00","close_reason":"Init command creates .superego/ with prompt.md, state.json, config.yaml, and directories.","dependencies":[{"issue_id":"higher-peak-8lw","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:26.886158+01:00","created_by":"drazen"}]}
{"id":"higher-peak-8ov","title":"Remove pre-tool-use hook (hard gating)","description":"Why: Hard gating doesn't align with feedback-first philosophy. Done when: hook, sg check command, and tools.rs removed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T22:26:52.565045+01:00","updated_at":"2025-12-11T22:27:03.337487+01:00","closed_at":"2025-12-11T22:27:03.337487+01:00","close_reason":"Removed pre-tool-use.sh, sg check command, and tools.rs"}
{"id":"higher-peak-90t","title":"Update Stop hook to trigger LLM evaluation","description":"Why: Stop hook only runs evaluate-bd, not evaluate-llm. Rich feedback won't be generated. Done when: Stop hook calls sg evaluate-llm with transcript path (need to get from env or pass through).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T22:05:39.238552+01:00","updated_at":"2025-12-11T22:40:53.358737+01:00","closed_at":"2025-12-11T22:40:53.358737+01:00","close_reason":"Stop hook now reads transcript_path from stdin, calls evaluate-llm"}
{"id":"higher-peak-9eo","title":"Implement decision journal (read/write YAML)","description":"Why: Persist decisions for context recovery and audit trail. Done when: Can write decision records to .superego/decisions/, read them back, session_id in records not paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:18.514268+01:00","updated_at":"2025-12-11T19:22:24.524812+01:00","closed_at":"2025-12-11T19:22:24.524812+01:00","close_reason":"Decision journal implemented with YAML storage, phase transitions, overrides, and history retrieval.","dependencies":[{"issue_id":"higher-peak-9eo","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:18.161186+01:00","created_by":"drazen"}]}
{"id":"higher-peak-9hi","title":"Implement async evaluation via Stop hook","description":"Why: Evaluate while user types, not blocking on submit. Done when: Stop hook triggers sg evaluate in background, has-feedback/get-feedback commands work, UserPromptSubmit checks and surfaces feedback. Architecture: Stop→evaluate(async)→feedback queue→UserPromptSubmit checks→block if feedback.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-11T21:28:32.891626+01:00","updated_at":"2025-12-11T21:38:36.613508+01:00","closed_at":"2025-12-11T21:38:36.613508+01:00","close_reason":"Implemented async evaluation via Stop hook with feedback queue"}
{"id":"higher-peak-9ty","title":"Scaffold Rust CLI project with clap","description":"Why: Foundation for all sg commands. Done when: cargo new + clap dependency + basic sg --help works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-11T17:46:00.664042+01:00","updated_at":"2025-12-11T19:10:35.610639+01:00","closed_at":"2025-12-11T19:10:35.610639+01:00","close_reason":"Rust CLI scaffolded with clap. All 11 subcommands defined: init, evaluate, check, acknowledge, override, history, context-inject, precompact, reset, disable, enable. Builds and runs."}
{"id":"higher-peak-a6m","title":"Investigate session_id extraction from transcript path","description":"Why: Need to know where session_id comes from for decision records. Done when: Documented how to extract session_id (from filename? hook input?), implemented in CLI.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:34:37.502436+01:00","updated_at":"2025-12-11T22:55:41.928837+01:00","closed_at":"2025-12-11T22:55:41.928837+01:00","close_reason":"Session ID available from Claude response and transcript entries - no additional extraction needed","dependencies":[{"issue_id":"higher-peak-a6m","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:15.260076+01:00","created_by":"drazen"}]}
{"id":"higher-peak-afu","title":"Clean up unused transcript functions","description":"Why: get_user_messages, extract_session_id, get_last_user_message etc unused. Done when: Dead functions removed or marked pub(crate) if internal.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T22:05:59.924359+01:00","updated_at":"2025-12-11T22:30:53.741044+01:00","closed_at":"2025-12-11T22:30:53.741044+01:00","close_reason":"Removed unused transcript functions and chrono import"}
{"id":"higher-peak-anu","title":"Implement tool classification (read vs write)","description":"Why: Only gate write tools, skip reads for speed. Done when: Classifies tools as read (Glob,Grep,Read,LS,WebFetch,WebSearch) or write (Edit,Write,Bash,Task,NotebookEdit). PreToolUse hook uses this to skip checks on reads.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:09:04.632425+01:00","updated_at":"2025-12-11T19:20:13.441175+01:00","closed_at":"2025-12-11T19:20:13.441175+01:00","close_reason":"Tool classification implemented with read/write/unknown categories. Unknown tools gated for safety.","dependencies":[{"issue_id":"higher-peak-anu","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:09:53.148892+01:00","created_by":"drazen"}]}
{"id":"higher-peak-awt","title":"Implement recursion prevention","description":"Why: Superego's Claude session must not trigger hooks that call superego. Done when: Hooks detect .superego/ in transcript path and skip, or use session ID filtering.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:14:38.247985+01:00","updated_at":"2025-12-11T22:49:00.601179+01:00","closed_at":"2025-12-11T22:49:00.601179+01:00","close_reason":"Set SUPEREGO_DISABLED=1 env var when invoking Claude - hooks check this and skip","dependencies":[{"issue_id":"higher-peak-awt","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:16:51.248466+01:00","created_by":"drazen"}]}
{"id":"higher-peak-b0n","title":"Harmonize superego system with feedback-first flow","description":"Why: System evolved from phase-gating to rich feedback. Done when: Remove Phase enum, simplify state.rs, clean up decision.rs, evaluate.rs uses new prompt, hooks deliver feedback, claude.rs handles natural language response. Single coherent flow: Stop→LLM evaluate→feedback queue→UserPromptSubmit→inject to Claude.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-11T21:53:55.726689+01:00","updated_at":"2025-12-11T22:06:16.861892+01:00","closed_at":"2025-12-11T22:06:16.861892+01:00","close_reason":"Scanned codebase, created 6 cleanup tasks: 90t (Stop hook LLM), cv0 (pre-tool-use PHASE), 1ws (Feedback Severity), 6mx (claude.rs JSON), afu (transcript), 4kz (general dead code)","dependencies":[{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-6dy","type":"blocks","created_at":"2025-12-11T21:54:09.318651+01:00","created_by":"drazen"},{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-5xr","type":"blocks","created_at":"2025-12-11T21:54:14.469493+01:00","created_by":"drazen"},{"issue_id":"higher-peak-b0n","depends_on_id":"higher-peak-dzi","type":"blocks","created_at":"2025-12-11T21:54:19.59821+01:00","created_by":"drazen"}]}
{"id":"higher-peak-cdz","title":"Define override scope and duration","description":"Why: When user overrides, unclear how long it lasts. Done when: Decided and implemented - options: single action, rest of session, until phase changes. Probably: override allows one blocked action, then re-evaluates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:16:28.962909+01:00","updated_at":"2025-12-11T18:18:56.131616+01:00","closed_at":"2025-12-11T18:18:56.131616+01:00","close_reason":"Decision: Override allows single action only, then re-evaluates on next write tool. Safest approach - forces explicit re-confirmation."}
{"id":"higher-peak-cv0","title":"Fix pre-tool-use hook PHASE reference","description":"Why: Hook still checks for PHASE in sg check output, but phase was removed. Done when: Hook updated to not reference phase, just uses decision/reason.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-11T22:05:44.423958+01:00","updated_at":"2025-12-11T22:24:31.711952+01:00","closed_at":"2025-12-11T22:24:31.711952+01:00","close_reason":"Removed PHASE reference from pre-tool-use.sh, simplified deny logic"}
{"id":"higher-peak-d20","title":"Explore using bd for superego phase tracking","description":"Why: bd already has issues, status tracking, and git sync. Could model phases as issue states or use bd's infrastructure instead of custom YAML/JSON. Done when: Documented pros/cons of bd-backed vs custom state, decision made on whether to pivot. Consider: phase as issue status, decisions as issue comments, session context as issue description.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T19:33:38.496553+01:00","updated_at":"2025-12-11T21:42:24.144839+01:00","closed_at":"2025-12-11T21:42:24.144839+01:00","close_reason":"Implemented - bd state now drives phase detection via evaluate_bd()"}
{"id":"higher-peak-ddl","title":"Implement PreCompact hook for state preservation","description":"Why: When Claude compacts context, transcript is truncated. Superego must update its tracking before compaction. Done when: PreCompact hook calls sg precompact, which reads full transcript and writes summary decision to journal capturing current understanding (phase, scope, key decisions).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:34:21.8048+01:00","updated_at":"2025-12-11T22:59:32.409386+01:00","closed_at":"2025-12-11T22:59:32.409386+01:00","close_reason":"Renamed stop.sh to evaluate.sh - same script used by Stop and PreCompact hooks","dependencies":[{"issue_id":"higher-peak-ddl","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:10.111562+01:00","created_by":"drazen"}]}
{"id":"higher-peak-dzi","title":"Remove Phase enum and state machine","description":"Why: Phase (Exploring/Discussing/Ready) was for LLM-based conversation analysis. Now using bd state directly. Done when: Phase enum removed, state.rs simplified, decision.rs cleaned up, check uses bd state directly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T21:41:37.591176+01:00","updated_at":"2025-12-11T22:03:53.574197+01:00","closed_at":"2025-12-11T22:03:53.574197+01:00","close_reason":"Removed Phase enum, simplified State to just override/disabled, updated evaluate.rs/main.rs/init.rs. All 26 tests pass."}
{"id":"higher-peak-e89","title":"Implement sg context-inject command","description":"Why: SessionStart hook needs to inject superego context into Claude. Done when: Outputs behavioral contract + recent decisions summary as additionalContext for Claude.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T18:23:20.258193+01:00","updated_at":"2025-12-11T18:23:20.258193+01:00","dependencies":[{"issue_id":"higher-peak-e89","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:32.001237+01:00","created_by":"drazen"},{"issue_id":"higher-peak-e89","depends_on_id":"higher-peak-4ik","type":"blocks","created_at":"2025-12-11T18:24:52.602841+01:00","created_by":"drazen"}]}
{"id":"higher-peak-g1h","title":"Implement override state tracking in sg check","description":"Why: sg check needs to know if override is pending. Done when: sg override sets pending_override in state.json, sg check allows one action then clears it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:23:56.178839+01:00","updated_at":"2025-12-11T19:26:04.335594+01:00","closed_at":"2025-12-11T19:26:04.335594+01:00","close_reason":"Override tracking implemented: sg override sets pending_override, sg check allows then clears it.","dependencies":[{"issue_id":"higher-peak-g1h","depends_on_id":"higher-peak-v2i","type":"blocks","created_at":"2025-12-11T18:24:42.314744+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ggj","title":"Design superego system prompt","description":"Why: Defines superego's personality and evaluation criteria. Done when: prompt.md template exists, covers: phase detection, unknown tracking, JSON output format. IMPORTANT: If first message is ambiguous (e.g. 'fix the bug'), superego should indicate opportunity for Claude to clarify scope before proceeding.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:56:15.728032+01:00","updated_at":"2025-12-11T19:07:50.535159+01:00","closed_at":"2025-12-11T19:07:50.535159+01:00","close_reason":"Created .superego/prompt.md with phase detection, local maxima detection, mechanism clarity, motion vs learning, scope discipline, long-horizon awareness. Incorporates dissent mode, managed disequilibrium, open horizons, beyond nearest peak concepts.","dependencies":[{"issue_id":"higher-peak-ggj","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:57:15.575755+01:00","created_by":"drazen"}]}
{"id":"higher-peak-gmx","title":"Create SessionStart hook for context injection","description":"Why: Inject superego behavioral contract into Claude's context. Done when: Hook returns additionalContext with obligations, resumed session shows decision summary.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:44.975752+01:00","updated_at":"2025-12-11T17:47:44.975752+01:00","dependencies":[{"issue_id":"higher-peak-gmx","depends_on_id":"higher-peak-4ik","type":"blocks","created_at":"2025-12-11T17:51:15.43955+01:00","created_by":"drazen"},{"issue_id":"higher-peak-gmx","depends_on_id":"higher-peak-e89","type":"blocks","created_at":"2025-12-11T18:24:57.760663+01:00","created_by":"drazen"}]}
{"id":"higher-peak-iqj","title":"Setup cargo packaging and installation","description":"Why: Users need to install sg CLI. Done when: cargo install works, Cargo.toml has proper metadata, README has install instructions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:24:11.296693+01:00","updated_at":"2025-12-12T15:38:08.417295+01:00","closed_at":"2025-12-12T15:38:08.417295+01:00","close_reason":"Added Cargo.toml metadata, LICENSE, Homebrew formula, README","dependencies":[{"issue_id":"higher-peak-iqj","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:24:47.463528+01:00","created_by":"drazen"}]}
{"id":"higher-peak-khw","title":"Investigate cost/usage metadata from Claude calls","description":"Why: Users should see superego's LLM usage. Done when: Investigated if Claude CLI exposes token counts/cost, implemented usage tracking if available.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-11T18:35:39.078714+01:00","updated_at":"2025-12-11T18:35:39.078714+01:00","dependencies":[{"issue_id":"higher-peak-khw","depends_on_id":"higher-peak-1sa","type":"blocks","created_at":"2025-12-11T18:36:35.802467+01:00","created_by":"drazen"}]}
{"id":"higher-peak-lsm","title":"Document Claude behavioral contract","description":"Why: Claude needs clear instructions on how to behave when blocked. Done when: Markdown doc specifies: surface conflicts to user, present options, call acknowledge/override appropriately.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T17:47:57.248247+01:00","updated_at":"2025-12-11T17:47:57.248247+01:00"}
{"id":"higher-peak-o7e","title":"Define context window strategy for LLM evaluation","description":"Why: Need to decide how much transcript to send to superego LLM. Done when: Strategy documented and implemented - options: last N messages, last N tokens, summary + recent, sliding window.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:16:13.526379+01:00","updated_at":"2025-12-11T22:54:38.201873+01:00","closed_at":"2025-12-11T22:54:38.201873+01:00","close_reason":"Use last_evaluated timestamp to get new messages, not arbitrary window","dependencies":[{"issue_id":"higher-peak-o7e","depends_on_id":"higher-peak-uws","type":"blocks","created_at":"2025-12-11T18:16:56.40598+01:00","created_by":"drazen"}]}
{"id":"higher-peak-oin","title":"Implement failure handling for sg evaluate","description":"Why: LLM calls can fail/timeout. Done when: Timeout handling, fallback to safe default (EXPLORING), error logging, user notification on repeated failures.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:15:15.971888+01:00","updated_at":"2025-12-11T19:35:46.53174+01:00","closed_at":"2025-12-11T19:35:46.53174+01:00","close_reason":"Failure handling: evaluate_with_fallback returns EXPLORING on error","dependencies":[{"issue_id":"higher-peak-oin","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:18:07.687705+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ov5","title":"End-to-end integration test","description":"Why: Verify full flow works. Done when: Test covers: hook blocks action → Claude surfaces conflict → user overrides → hook allows retry.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-11T17:48:10.741668+01:00","updated_at":"2025-12-11T17:48:10.741668+01:00","dependencies":[{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-yr1","type":"blocks","created_at":"2025-12-11T17:51:20.617469+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-gmx","type":"blocks","created_at":"2025-12-11T17:51:25.719328+01:00","created_by":"drazen"},{"issue_id":"higher-peak-ov5","depends_on_id":"higher-peak-7sh","type":"blocks","created_at":"2025-12-11T18:11:00.629461+01:00","created_by":"drazen"}]}
{"id":"higher-peak-peo","title":"Remove evaluate-bd (redundant)","description":"Why: evaluate-bd is redundant - check directly queries bd, rich feedback comes from evaluate-llm with bd context. Done when: evaluate-bd function and command removed, Stop hook calls evaluate-llm, task 90t closed as obsolete.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T22:09:10.54916+01:00","updated_at":"2025-12-11T22:45:32.167282+01:00","closed_at":"2025-12-11T22:45:32.167282+01:00","close_reason":"Removed evaluate-bd command and function - LLM evaluation handles everything","dependencies":[{"issue_id":"higher-peak-peo","depends_on_id":"higher-peak-toj","type":"blocks","created_at":"2025-12-11T22:09:20.663624+01:00","created_by":"drazen"}]}
{"id":"higher-peak-pvi","title":"Implement bd-based phase detection","description":"Why: Observable phase via bd state, not LLM guessing. Done when: No in_progress tasks = read-only, tasks in_progress = check alignment, task creation requires confirmation. Phase from workflow artifacts not conversation analysis.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-11T21:28:43.806154+01:00","updated_at":"2025-12-11T21:38:31.477404+01:00","closed_at":"2025-12-11T21:38:31.477404+01:00","close_reason":"Implemented bd-based phase detection via evaluate_bd()"}
{"id":"higher-peak-s0n","title":"Implement detailed audit trail logging","description":"Why: Need visibility into superego decisions for debugging. Done when: Every evaluate/check/override writes to .superego/audit.log with timestamp, input, decision, reason.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T18:34:50.984317+01:00","updated_at":"2025-12-11T18:34:50.984317+01:00","dependencies":[{"issue_id":"higher-peak-s0n","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:36:20.402384+01:00","created_by":"drazen"}]}
{"id":"higher-peak-toj","title":"Enhance superego prompt with bd context","description":"Why: LLM should know current bd task(s) to evaluate alignment. Done when: Prompt includes current task title/description, LLM can flag scope drift, feedback references task context. evaluate-llm passes bd state to prompt.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-11T22:07:59.272262+01:00","updated_at":"2025-12-11T22:42:40.978224+01:00","closed_at":"2025-12-11T22:42:40.978224+01:00","close_reason":"evaluate_llm now includes bd task context, prompt updated with Task Alignment section"}
{"id":"higher-peak-uws","title":"Implement transcript JSONL reader","description":"Why: Superego needs to read Claude Code conversation history. Done when: Can parse transcript_path JSONL, extract messages with roles/content.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:10.227196+01:00","updated_at":"2025-12-11T19:17:05.65215+01:00","closed_at":"2025-12-11T19:17:05.65215+01:00","close_reason":"Transcript JSONL reader implemented with types, reader, tests. Parses real transcripts successfully.","dependencies":[{"issue_id":"higher-peak-uws","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T17:50:13.003014+01:00","created_by":"drazen"}]}
{"id":"higher-peak-v2i","title":"Implement sg check command","description":"Why: Fast gate for write tools. Done when: Reads .superego/state.json (cached phase), returns allow/block based on phase vs tool type. NO LLM call - just reads cached state from evaluate.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:46:26.701874+01:00","updated_at":"2025-12-11T19:24:46.901462+01:00","closed_at":"2025-12-11T19:24:46.901462+01:00","close_reason":"Check command implemented with state.json reading, tool classification, override consumption, and JSON output.","dependencies":[{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-9eo","type":"blocks","created_at":"2025-12-11T17:50:36.82027+01:00","created_by":"drazen"},{"issue_id":"higher-peak-v2i","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:10:41.366504+01:00","created_by":"drazen"}]}
{"id":"higher-peak-ya8","title":"Handle cold start (first evaluation)","description":"Why: First sg evaluate has no prior context. Done when: Detects missing state.json, primes superego with project summary from decision journal, defaults to EXPLORING phase.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:15:47.219+01:00","updated_at":"2025-12-11T19:35:51.677725+01:00","closed_at":"2025-12-11T19:35:51.677725+01:00","close_reason":"Cold start: defaults to EXPLORING if no state.json exists","dependencies":[{"issue_id":"higher-peak-ya8","depends_on_id":"higher-peak-9ty","type":"blocks","created_at":"2025-12-11T18:18:12.820842+01:00","created_by":"drazen"}]}
{"id":"higher-peak-yr1","title":"Create PreToolUse hook script","description":"Why: Gate Claude actions via hook. Done when: Hook reads stdin JSON, calls sg check, returns permissionDecision deny/allow with reason.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:47:34.398443+01:00","updated_at":"2025-12-11T21:06:48.23752+01:00","closed_at":"2025-12-11T21:06:48.23752+01:00","close_reason":"PreToolUse hook script created: gates write tools, returns permissionDecision JSON","dependencies":[{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-v2i","type":"blocks","created_at":"2025-12-11T17:51:10.287715+01:00","created_by":"drazen"},{"issue_id":"higher-peak-yr1","depends_on_id":"higher-peak-anu","type":"blocks","created_at":"2025-12-11T18:09:58.318623+01:00","created_by":"drazen"}]}
